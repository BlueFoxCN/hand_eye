import numpy as np

from robot_kinematics import g2b

u = 320
v = 240
z = 410

fx = 512.75914663
fy = 513.18071586
cx = 306.61917038
cy = 239.3563625

x = (u - cx) / fx * z
y = (v - cy) / fy * z

cam_homo = np.array([x, y, z, 1])

gHc = np.array([[0.0544157882094, 0.997565095201, 0.0436211282595, -66.4637355305],
                [0.997889684631, -0.0527796383928, -0.037821780478, -6.5370782097],
                [-0.0354273806674, 0.0455871759183, -0.998331963873, -26.1822950298],
                [0.0, 0.0, 0.0, 1.0]])

'''
gHc = np.array([[0.0703046536601, 0.997152041516, 0.0272958197243, -51.7203198622],
                [0.997403811925, -0.0698422321089, -0.0175413389341, -11.6150675493],
                [-0.0155849809523, 0.0284581924011, -0.999473481216, -23.5174958821],
                [0.0, 0.0, 0.0, 1.0]])
'''

grp_homo = gHc.dot(cam_homo)

g2b_list = g2b([0, 0, -90, 0, -90, 0])

T = np.identity(4)

for t in g2b_list:
    T = t.dot(T)

base_homo = T.dot(grp_homo)

print(base_homo[:3])
